<!DOCTYPE html>
<html>
<head>
   <title>501 Craps - alpha</title>
   <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
   <meta charset="UTF-8" />
   <link rel="stylesheet" type="text/css" href="/css/styles.css"/>
   <script type="text/javascript" src="/js/external/three.min.r55.js"></script>
   <script type="text/javascript" src="/js/external/stats.js"></script>
   <script type="text/javascript" src="/js/external/physi.r55.js"></script>
   <script type="text/javascript" src="/js/external/dat.gui.min.js"></script>
   <script type="text/javascript" src="/js/betseval.js"></script>
   <script type="text/javascript" src="/js/diceroller.js"></script>
   <script src="/socket.io/socket.io.js"></script>
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
   <script type="text/javascript">

   Physijs.scripts.worker = '/js/external/physijs_worker.js';
   window.onload = function() {
      //get query variables from url querystring
      var vars = [], hash;
      var q = document.URL.split('?')[1];
         if (q != undefined) {
            q = q.split('&');
            for (var i = 0; i < q.length; i++) {
               hash = q[i].split('=');
               vars.push(hash[1]);
               vars[hash[0]] = hash[1];
            }
      }

      Roller.init();

      var socket = io.connect('http://localhost:3000');
      //var socket = io.connect('http://craps501.herokuapp.com/');

/*
      $.get('http://casino.curtiswendel.me:8080/everything?name=' + vars['id'], function(data) {
         console.log(data);
      })
*/
      socket.emit('joinTable', {tableNumber: vars['t'], name: vars['name'], funds: vars['funds']});

      /* socket.io events */

      socket.on('roll', function (data) {
         console.log(data);
         Roller.roll();
      });

      socket.on('newPlayer', function (player) {
         $('#name0').text(player.name);
         $('#funds0').text(player.funds);
      })


      /* jQuery events */

      $('#rollButton').click(function() {
         Roller.roll();
      });

      $('#leaveGame').click(function() {
         socket.emit('leaveTable', {tableNumber: vars['t'], name: vars['name']});
         window.location = "http://localhost:3000/splash";
      });

      $('#newUser').click(function()   {
         document.getElementById("name0").innerHTML = "Karan";
         document.getElementById("funds0").innerHTML = "Funds: 1550";
         document.getElementById("picture0").src = "https://scontent-a-dfw.xx.fbcdn.net/hphotos-frc3/t1.0-9/1461730_10152375685113327_579832133_n.jpg";
      });

      $(window).bind('beforeunload', function() {
         $('#game, #viewport, #players').hide();
         socket.emit('leaveTable', {tableNumber: vars['t'], name: vars['name']});
         return "Are you sure?";
      });
   }

   </script>
</head>
<body>
   <button id="leaveGame">Leave Game</button>
   <div id="game" style="display: inline-block; float:left; background-color: gray; height:400px; width:25%;">
      <h1>Click Roll Below:</h1>
      <button id="rollButton">Roll</button><br>
      <h1>Place Your Bets!</h1>
      <div class="bettingCheckboxes">
         <input type="checkbox" id="passLineCb">Pass Line Bet<br>
         <input type="checkbox" id="dontPassLineCb">Don't Pass Line Bet<br>
         <input type="checkbox" id="passOddsCb" disabled>Pass Odds Bet<br>
         <input type="checkbox" id="dontPassOddsCb" disabled>Don't Pass Odds Bet<br>
         <input type="checkbox" id="snakeEyesCb">Snake Eyes [2] Bet<br>
         <input type="checkbox" id="aceDeuceCb">Ace-Deuce [3] Bet<br>
         <input type="checkbox" id="yoCb">Yo [11] Bet<br>
         <input type="checkbox" id="boxcarsCb">Boxcars [12] Bet<br>
         <input type="checkbox" id="anyCrapsCb">Any Craps [2,3, or 11] Bet<br>
         <input type="checkbox" id="anySevenCb">Any Seven [7] Bet<br>
         <input type="checkbox" id="fieldCb">Field [2,3,4,9,11, or 12] Bet<br>
         <input type="checkbox" id="hard4Cb">Hard Way 4 Bet<br>
         <input type="checkbox" id="hard6Cb">Hard Way 6 Bet<br>
         <input type="checkbox" id="hard8Cb">Hard Way 8 Bet<br>
         <input type="checkbox" id="hard10Cb">Hard Way 10 Bet<br>
      </div>
   </div>
   <div id="viewport" style="display: inline-block; float:left; width: 50%;"></div>
   <div id="game" style="display: inline-block; background-color: gray; width:25%; height:400px; float:left;">
      <div id="total"></div>
      <div id="rollVal"></div>
      <div id="currGameState">
      </div>
   </div>
   <div id="players">
      <div class="player" id="player0">
         <h2 id="name0">User 0</h2>
         <h3 id="funds0">Fund: 0</h3>
         <img id="picture0" src="http://placehold.it/350x150"></img>
      </div>
      <div class="player" id="player1">
         <h2 id="name1">User 1</h2>
         <h3 id="funds1">Fund: 0</h3>
         <img id="picture1" src="http://placehold.it/350x150"></img>
      </div>
      <div class="player" id="player2">
         <h2 id="name2">User 2</h2>
         <h3 id="funds2">Fund: 0</h3>
         <img id="picture2" src="http://placehold.it/350x150"></img>
      </div>
      <div class="player" id="player3">
         <h2 id="name3">User 3</h2>
         <h3 id="funds3">Fund: 0</h3>
         <img id="picture3" src="http://placehold.it/350x150"></img>
      </div>
      <div class="player" id="player4">
         <h2 id="name4">User 4</h2>
         <h3 id="funds4">Fund: 0</h3>
         <img id="picture4" src="http://placehold.it/350x150"></img>
      </div>
      <div class="player" id="player5">
         <h2 id="name5">User 5</h2>
         <h3 id="funds5">Fund: 0</h3>
         <img id="picture5" src="http://placehold.it/350x150"></img>
      </div>
      <div class="player" id="player6">
         <h2 id="name6">User 6</h2>
         <h3 id="funds6">Fund: 0</h3>
         <img id="picture6" src="http://placehold.it/350x150"></img>
      </div>

      <!-- Enter user -->

      <div id="enter">
         <h1>New User Enters:</h1>
         <button id="newUser">Enter User</button>
      </div>

      <div class="player" id="player7">
         <h2 id="name7">User 7</h2>
         <h3 id="funds7">Fund: 0</h3>
         <img id="picture7" src="http://placehold.it/350x150"></img>
      </div>
   </div>
</body>
</html>